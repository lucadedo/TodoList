(()=>{const e=localStorage.getItem("ALL")?JSON.parse(localStorage.getItem("ALL")):[{title:"Get a coke at 711",date:"2023-12-13"},{title:"wash dishes",date:"2023-12-12"}];localStorage.setItem("ALL",JSON.stringify(e)),console.log("ALL ",e);var t=!0;function n(e){let n="";n+=`<div class="task">\n\n                        <div id="task-left-side">\n\n                            <p id="task-title">${e.title}</p>\n                            <p id="task-date">${e.date}</p>\n\n                        </div>\n\n                        <div id="task-right-side">\n                            <input id="checkbox" type="checkbox">\n                            <button id="edit" type="button">edit</button>\n                            <button id="delete" type="button">delete</button>                            \n                        </div>\n\n                   </div>`,document.querySelector("#tasks").innerHTML+=n,document.querySelectorAll("#delete").forEach(((e,n)=>{e.addEventListener("click",(()=>{!function(e){if(!t)return;console.log(e);let n=JSON.parse(localStorage.getItem("ALL"));n.splice(e,1),localStorage.setItem("ALL",JSON.stringify(n)),location.reload()}(n)}))})),document.querySelectorAll("#edit").forEach(((e,n)=>{e.addEventListener("click",(()=>{console.log(e,n),function(e,n){if(!t)return;t=!1;let l=document.querySelectorAll("#delete"),o=document.querySelectorAll("#checkbox");document.querySelectorAll("#task-left-side")[n].style.flex="inherit",e.id+=" hide",l[n].id+=" hide",o[n].id+=" hide";let i=JSON.parse(localStorage.getItem("ALL"));console.log(i[n].date);let a=document.querySelectorAll("#task-left-side");console.log(a[n]),a[n].innerHTML=` <form id="edit-task-form" action="#">\n                                    <input \n                                    type="text" \n                                    name="new-task-input" \n                                    id="new-task-input" \n                                    value="${i[n].title}" \n                                    />\n                                    <input type="date" id="new-date-input-edit" name="trip-start"\n                                    value="${i[n].date}"\n                                    min="2020-01-01" \n                                    max="2025-12-31">\n                                    <button id="save" style="display: none;" type="submit">save</button>\n                                    <button id="cancel" style="display: none;" type="button">cancel</button>\n                                </form>`;let c=document.getElementById("save"),d=document.getElementById("cancel");c.style.display="block",d.style.display="block",document.getElementById("edit-task-form").addEventListener("submit",function(e){return function(t){t.preventDefault();const n=t.target;let l=n.querySelector("#new-task-input").value,o=n.querySelector("#new-date-input-edit").value;console.log(o);const i={title:l,date:o};console.log(i);let a=JSON.parse(localStorage.getItem("ALL"));a.splice([e],1,i),console.log(a),localStorage.setItem("ALL",JSON.stringify(a)),location.reload()}}(n)),document.querySelector("#cancel").addEventListener("click",(()=>{location.reload()}))}(e,n)}))}))}!function(){for(let t=0;t<e.length;t++)n(e[t])}(),document.getElementById("new-task-form").addEventListener("submit",(function(t){t.preventDefault();const l=t.target,o={title:l.querySelector("#new-task-input").value,date:l.querySelector("#new-date-input").value};console.log(o),e.push(o),localStorage.setItem("ALL",JSON.stringify(e)),n(o)}))})();